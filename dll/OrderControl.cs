using System; using System.Collections.Generic; using System.ComponentModel; using System.Text; using System.Web; using System.Web.UI; using System.Web.UI.WebControls; using System.Data;  namespace Seika.ServicesCol {     [DefaultProperty("OrderControl")]     [ToolboxData("<{0}:OrderControl runat=server></{0}:OrderControl>")]     public class OrderControl : WebControl     {         private String _imageUpUrl = String.Empty;         private String _imageDownUrl = String.Empty;         private String _orderState = "ASC";          //正序         private ImageButton ibtnUp = new ImageButton();         //倒序         private ImageButton ibtnDown = new ImageButton();          public event EventHandler OrderStateChange;          public OrderControl()         {             ibtnUp.ImageUrl = _imageUpUrl;             ibtnDown.ImageUrl = _imageDownUrl;              ibtnUp.Click += new ImageClickEventHandler(ibtnUp_Click);             ibtnDown.Click += new ImageClickEventHandler(ibtnDown_Click);              this.Controls.Add(ibtnUp);             this.Controls.Add(ibtnDown);         }          [Bindable(true)]         [Category("排序状态")]         [DefaultValue("")]         [Localizable(true)]         public String OrderState         {             set { _orderState = value; }             get { return _orderState; }         }          [Bindable(true)]         [Category("正序图标")]         [DefaultValue("")]         [Localizable(true)]         public String ImageUpUrl         {             set { _imageUpUrl = value; }             get { return _imageUpUrl; }         }          [Bindable(true)]         [Category("倒序图标")]         [DefaultValue("")]         [Localizable(true)]         public String ImageDownUrl         {             set { _imageDownUrl = value; }             get { return _imageDownUrl; }         }          protected void RaisePostDataChangedEvent(System.EventArgs e)         {             //委托给加载控件页的PageIndexChange事件             if (OrderStateChange != null)             {                 OrderStateChange(this, e);             }         }          private void ibtnUp_Click(object sender,System.Web.UI.ImageClickEventArgs e)          {             _orderState = "ASC";                         if (OrderStateChange != null)             {                 OrderStateChange(this, e);             }         }          private void ibtnDown_Click(object sender, System.Web.UI.ImageClickEventArgs e)         {             _orderState = "DESC";              if (OrderStateChange != null)             {                 OrderStateChange(this, e);             }         }          protected override void RenderContents(HtmlTextWriter output)         {             this.ibtnUp.ImageUrl = _imageUpUrl;             this.ibtnUp.RenderControl(output);              this.ibtnDown.ImageUrl = _imageDownUrl;             this.ibtnDown.RenderControl(output);         }     } } 